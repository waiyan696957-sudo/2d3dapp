<!DOCTYPE html>
<html lang="my">
<head>
  <meta charset="UTF-8">
  <title>2D á€…á€¬á€›á€„á€ºá€¸á€á€½á€„á€ºá€¸á€á€¼á€„á€ºá€¸</title>
  <style>
    body {
      font-family: sans-serif;
      background: linear-gradient(to right, #dbeafe, #f0f9ff);
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 400px;
      margin: auto;
      padding: 20px;
      background: white;
      margin-top: 40px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      text-align: center;
    }
    input, select, button, a.btn {
      width: 50%;
      max-width: 280px;
      padding: 2px 4px;
      margin: 5px auto;
      border-radius: 6px;
      border: none;
      font-size: 12px;
      display: block;
      cursor: pointer;
    }
    button, a.btn {
      background: #3b82f6;
      color: white;
      border: none;
      cursor: pointer;
      padding: 2px 4px;
    }
    button:hover, a.btn:hover {
      background: #2563eb;
    }
    .button-group {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 10px;
    }
    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
    }
    .modal-content {
      background: white;
      margin: 5% auto;
      padding: 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 400px;
    }
    .close {
      float: right;
      font-size: 22px;
      cursor: pointer;
    }
    #tempList {
      list-style: none;
      padding: 0;
      margin-top: 10px;
      text-align: left;
    }
    #tempList li {
      background: #f1f1f1;
      padding: 6px;
      margin-bottom: 5px;
      border-radius: 5px;
    }
  .modal-content input,
  .modal-content select,
  .modal-content button {
    width: 90%;
    max-width: 260px;
    padding: 7px;
    font-size: 14px;}
  </style>
</head>
<body>

<div class="container">
  <h2>2D á€”á€¶á€•á€«á€á€º + Amount á€‘á€Šá€·á€ºá€•á€«</h2>

  <!-- á€™á€°á€œ input -->
  <input type="text" id="twoDigit" placeholder="2D á€”á€¶á€•á€«á€á€º (á€¥á€•á€™á€¬ 12)" maxlength="2">
  <input type="number" id="amount" placeholder="á€„á€½á€±á€•á€™á€¬á€ (á€¥á€•á€™á€¬ 1000)">

  <div class="button-group">
    <button onclick="save2DEntry()" class="Btun">ğŸ’¾ á€á€„á€ºá€™á€Šá€º</button>
    <a href="list2d.html" class="btn">ğŸ“ƒ á€…á€¬á€›á€„á€ºá€¸á€€á€¼á€Šá€·á€º</a>
  </div>

  <hr>
  <!-- á€¡á€á€…á€ºá€‘á€Šá€·á€ºá€™á€Šá€º button -->
  <button onclick="openModal()">â• á€‘á€Šá€·á€ºá€™á€Šá€º</button>

  <p id="msg"></p>
</div>

<!-- Modal box -->
<div id="entryModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <h3>ğŸ“Œ 2D á€¡á€á€»á€€á€ºá€¡á€œá€€á€ºá€‘á€Šá€·á€ºá€™á€Šá€º</h3>

    <input type="text" id="modalTwoDigit" placeholder="2D á€”á€¶á€•á€«á€á€º" maxlength="2">
    <input type="number" id="modalAmount" placeholder="Amount">
    <input type="text" id="modalName" placeholder="á€œá€°á€”á€¬á€”á€¬á€™á€Šá€º">

    <!-- á€¡á€á€»á€­á€”á€ºá€›á€½á€±á€¸á€á€»á€šá€ºá€›á€”á€º -->
    <select id="modalTime">
      <option value="">á€¡á€á€»á€­á€”á€ºá€›á€½á€±á€¸á€•á€«</option>
      <option value="9:30">9:30</option>
      <option value="12:00">12:00</option>
      <option value="2:00">2:00</option>
      <option value="4:00">4:00</option>
    </select>

    <button onclick="addTempEntry()">á€‘á€Šá€·á€ºá€™á€Šá€º</button>

    <ul id="tempList"></ul>

    <button onclick="saveAllEntries()">ğŸ’¾ á€á€„á€ºá€™á€Šá€º</button>
  </div>
</div>

<script>
let tempEntries = [];

// Modal á€–á€½á€„á€·á€º
function openModal() {
  document.getElementById('entryModal').style.display = 'block';
}

// Modal á€•á€­á€á€º + reset
function closeModal() {
  document.getElementById('entryModal').style.display = 'none';
  tempEntries = [];
  document.getElementById('tempList').innerHTML = "";
}

// Modal á€‘á€²á€™á€¾á€¬ temporary list á€‘á€Šá€·á€º
function addTempEntry() {
  const num = document.getElementById('modalTwoDigit').value.trim();
  const amount = document.getElementById('modalAmount').value.trim();
  const name = document.getElementById('modalName').value.trim();
  const time = document.getElementById('modalTime').value;

  if (!/^\d{2}$/.test(num) || !amount || !name || !time) {
    alert("á€¡á€á€»á€€á€ºá€¡á€œá€€á€ºá€•á€¼á€Šá€·á€ºá€…á€¯á€¶á€‘á€Šá€·á€ºá€•á€«");
    return;
  }

  const entry = { num, amount, name, time };
  tempEntries.push(entry);

  const li = document.createElement("li");
  li.textContent = `${time} - ${num} - ${amount} Ks - ${name}`;
  document.getElementById('tempList').appendChild(li);

  // clear inputs
  document.getElementById('modalTwoDigit').value = "";
  document.getElementById('modalAmount').value = "";
  document.getElementById('modalName').value = "";
  document.getElementById('modalTime').value = "";
}

// LocalStorage á€‘á€²á€á€­á€™á€ºá€¸
function saveAllEntries() {
  const date = new Date().toLocaleDateString();
  let entries = JSON.parse(localStorage.getItem("twoD_entries") || "[]");

  tempEntries.forEach(e => {
    entries.push({ ...e, date });
  });

  localStorage.setItem("twoD_entries", JSON.stringify(entries));
  closeModal();
  alert("á€¡á€¬á€¸á€œá€¯á€¶á€¸ á€á€­á€™á€ºá€¸á€•á€¼á€®á€¸á€•á€«á€•á€¼á€®");
}

// á€™á€°á€œ single entry save function
function save2DEntry() {
  const num = document.getElementById('twoDigit').value.trim();
  const amount = document.getElementById('amount').value.trim();
  const date = new Date().toLocaleString();

  if (!/^\d{2}$/.test(num) || !amount) {
    alert("á€¡á€á€»á€€á€ºá€¡á€œá€€á€ºá€•á€¼á€Šá€·á€ºá€…á€¯á€¶á€‘á€Šá€·á€ºá€•á€«");
    return;
  }

  let entries = JSON.parse(localStorage.getItem("twoD_entries") || "[]");
  entries.push({ num, amount, date, name: "N/A", time: "N/A" });
  localStorage.setItem("twoD_entries", JSON.stringify(entries));

  document.getElementById('twoDigit').value = "";
  document.getElementById('amount').value = "";
  document.getElementById('msg').textContent = "âœ… á€á€­á€™á€ºá€¸á€•á€¼á€®á€¸á€•á€«á€•á€¼á€®";
}
</script>

</body>
</html>